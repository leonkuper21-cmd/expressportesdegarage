<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Express Portes de Garage ‚Äî Montr√©al & Rive Sud | Express Garage Doors ‚Äî Montreal & South Shore</title>
  <meta name="description" content="Installation & r√©paration de portes de garage / Garage door installation & repair ‚Äî Montr√©al & Rive Sud / Montreal & South Shore. Call or text: 514-991-6682." />
  <link rel="stylesheet" href="assets/style.css"/>
  <link rel="icon" type="image/png" href="assets/favicon.png"/>
</head>
<body>

  <!-- TOP NAV -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="nav-logo">Express Portes de Garage</div>
      <nav class="nav-menu">
        <a href="index.html" class="active">Home / Accueil</a>
        <a href="services.html">Services</a>
        <a href="gallery.html">Gallery / Photos</a>
        <a href="about.html">About / √Ä propos</a>
        <a href="#quote">Contact</a>
      </nav>
    </div>
  </div>

  <!-- Language Switch -->
  <div class="lang-switch" aria-label="Language switch">
    <button id="switch-fr" class="active" aria-pressed="true">FR</button>
    <button id="switch-en" aria-pressed="false">EN</button>
  </div>

  <!-- HERO -->
  <header class="hero">
    <h1 id="title">Express Portes de Garage</h1>
    <p class="sub" id="subtitle"></p>
    <div class="phone">üìû <a href="tel:+15149916682">514-991-6682</a></div>
    <div class="actions">
      <a class="btn" id="ctaCall" href="tel:+15149916682"></a>
      <a class="btn outline" id="ctaText" href=""></a>
    </div>
  </header>

  <main>
    <!-- SERVICES SHORT -->
    <section id="services">
      <h2 id="servicesTitle"></h2>
      <ul class="services" id="servicesList"></ul>
    </section>

    <!-- FORM -->
    <section id="quote">
      <h2 id="formTitle"></h2>
      <form id="serviceForm" novalidate>
        <div class="row">
          <div>
            <label for="name" id="labelName"></label>
            <input id="name" name="name" required />
          </div>
          <div>
            <label for="phone" id="labelPhone"></label>
            <input id="phone" name="phone" inputmode="tel" required />
          </div>
          <div>
            <label for="email" id="labelEmail"></label>
            <input id="email" name="email" type="email" />
          </div>
          <div>
            <label for="city" id="labelCity"></label>
            <input id="city" name="city" />
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <div>
            <label id="labelService"></label>
            <div class="checkgroup" id="serviceChips"></div>
          </div>
        </div>

        <div class="row" style="margin-top:8px">
          <div>
            <label for="details" id="labelDetails"></label>
            <textarea id="details" name="details"></textarea>
          </div>
        </div>

        <div class="notice" id="notice"></div>

        <div class="submitbar">
          <button class="btn" type="submit" id="submitBtn"></button>
          <span class="ok" id="okMsgFR">‚úî Envoy√© ! Nous vous contacterons tr√®s bient√¥t.</span>
          <span class="ok" id="okMsgEN">‚úî Sent! We will contact you shortly.</span>
          <span class="err" id="errMsgFR">‚úñ Erreur. R√©essayez ou appelez-nous.</span>
          <span class="err" id="errMsgEN">‚úñ Error. Please try again or call us.</span>
        </div>
      </form>
    </section>
  </main>

  <footer>
    <div class="brand">Express Portes de Garage</div>
    <div id="footerLine"></div>
  </footer>

  <div class="toast" id="toast"></div>

  <script>
    // ------- Language data -------
    const LANG = {
      fr: {
        subtitle: "Installation & r√©paration de portes de garage ‚Äî Montr√©al & <strong>Rive Sud</strong> ‚Äî ressorts, c√¢bles, ouvre-portes, s√©curit√©",
        call: "Appeler / Call Now",
        text: "Texter / Text Now",
        textHref: "sms:+15149916682?body=Bonjour!%20J'ai%20besoin%20d'un%20service%20pour%20porte%20de%20garage.",
        servicesTitle: "Nos Services",
        services: [
          "R√©paration de portes de garage r√©sidentielles",
          "Remplacement de ressorts & c√¢bles",
          "R√©paration de rails & roulettes",
          "Installation & r√©paration d‚Äôouvre-portes (Chamberlain / LiftMaster)",
          "R√©glage d‚Äô√©quilibrage & s√©curit√©",
          "Portes de garage bloqu√©es ou sorties des rails",
          "T√©l√©commandes & claviers (keypads)",
          "Service m√™me journ√©e ‚Äî Montr√©al & Rive Sud"
        ],
        formTitle: "Demander un devis gratuit",
        labelName: "Nom",
        labelPhone: "T√©l√©phone",
        labelEmail: "Courriel",
        labelCity: "Ville / Quartier",
        labelService: "Type de service",
        chips: ["R√©paration r√©sidentielle","Ressorts & c√¢bles","Rails & roulettes","Ouvre-porte","R√©glage & s√©curit√©","Hors des rails","T√©l√©commande / Clavier"],
        labelDetails: "D√©tails",
        notice: "En envoyant, vous acceptez d‚Äô√™tre contact√© par t√©l√©phone, texto ou courriel.",
        submit: "Envoyer",
        footer: "Montr√©al & Rive Sud ‚Äî 514-991-6682",
        subject: "Demande de service ‚Äî Portes de garage",
        toast_ok: "‚úî Envoy√©",
        toast_err: "‚úñ Erreur d‚Äôenvoi"
      },
      en: {
        subtitle: "Garage door installation & repair ‚Äî Montreal & <strong>South Shore</strong> ‚Äî springs, cables, openers, safety",
        call: "Call Now",
        text: "Text Now",
        textHref: "sms:+15149916682?body=Hello!%20I%20need%20garage%20door%20service.",
        servicesTitle: "Our Services",
        services: [
          "Residential garage door repair",
          "Spring & cable replacement",
          "Track & roller repair",
          "Opener installation & repair (Chamberlain / LiftMaster)",
          "Balancing & safety tune-ups",
          "Stuck / off-track garage doors",
          "Remotes & keypads setup",
          "Same-day service ‚Äî Montreal & South Shore"
        ],
        formTitle: "Request a Free Estimate",
        labelName: "Name",
        labelPhone: "Phone",
        labelEmail: "Email",
        labelCity: "City / Location",
        labelService: "Service Required",
        chips: ["Residential Repair","Springs & Cables","Tracks & Rollers","Opener","Tune-up & Safety","Off-track","Remotes / Keypads"],
        labelDetails: "Details / Additional Info",
        notice: "By sending, you agree to be contacted by phone, text or email.",
        submit: "Send Request",
        footer: "Montreal & South Shore ‚Äî 514-991-6682",
        subject: "Garage Door Service Request",
        toast_ok: "‚úî Sent",
        toast_err: "‚úñ Sending error"
      }
    };

    const el = id => document.getElementById(id);
    const ctaText = el('ctaText');
    const serviceChips = el('serviceChips');
    let currentLang = localStorage.getItem('lang') || 'fr';

    function render(lang){
      currentLang = lang;
      localStorage.setItem('lang', lang);
      document.getElementById('switch-fr').classList.toggle('active', lang==='fr');
      document.getElementById('switch-en').classList.toggle('active', lang==='en');

      el('subtitle').innerHTML = LANG[lang].subtitle;
      el('ctaCall').textContent = LANG[lang].call;
      ctaText.textContent = LANG[lang].text;
      ctaText.href = LANG[lang].textHref;
      el('servicesTitle').textContent = LANG[lang].servicesTitle;
      el('servicesList').innerHTML = LANG[lang].services.map(s=>`<li>${s}</li>`).join('');
      el('formTitle').textContent = LANG[lang].formTitle;
      el('labelName').textContent = LANG[lang].labelName;
      el('labelPhone').textContent = LANG[lang].labelPhone;
      el('labelEmail').textContent = LANG[lang].labelEmail;
      el('labelCity').textContent = LANG[lang].labelCity;
      el('labelService').textContent = LANG[lang].labelService;
      el('labelDetails').textContent = LANG[lang].labelDetails;
      el('notice').textContent = LANG[lang].notice;
      el('submitBtn').textContent = LANG[lang].submit;
      el('footerLine').textContent = LANG[lang].footer;

      // Placeholders
      el('name').placeholder = (lang==='fr') ? "Votre nom" : "Your name";
      el('phone').placeholder = "+1 514 991 6682";
      el('email').placeholder = (lang==='fr') ? "vous@exemple.com" : "you@example.com";
      el('city').placeholder  = (lang==='fr') ? "Montr√©al, Brossard, Longueuil‚Ä¶" : "Montreal, Brossard, Longueuil‚Ä¶";
      el('details').placeholder = (lang==='fr') ? "D√©crivez la situation‚Ä¶" : "Describe the situation‚Ä¶";

      // Chips
      serviceChips.innerHTML = "";
      LANG[lang].chips.forEach(val => {
        const label = document.createElement('label');
        label.className = "chip";
        const input = document.createElement('input');
        input.type = "checkbox";
        input.name = "service";
        input.value = val;
        label.appendChild(input);
        label.appendChild(document.createTextNode(" " + val));
        serviceChips.appendChild(label);
      });
    }

    document.getElementById('switch-fr').addEventListener('click', ()=> render('fr'));
    document.getElementById('switch-en').addEventListener('click', ()=> render('en'));
    render(currentLang);

    // Toast
    const toast = el('toast');
    function showToast(msg){
      toast.textContent = msg;
      toast.style.display = 'inline-block';
      setTimeout(()=> toast.style.display='none', 2000);
    }

    // Web3Forms
    const WEB3FORMS_ACCESS_KEY = "07d8b155-6e6b-4955-b51d-8202d7c27ada";
    const MAILTO_EMAIL = "Construction2177@yahoo.com";

    const form = document.getElementById('serviceForm');
    const okFR = document.getElementById('okMsgFR');
    const okEN = document.getElementById('okMsgEN');
    const errFR = document.getElementById('errMsgFR');
    const errEN = document.getElementById('errMsgEN');

    function valid(){
      const name = el('name').value.trim();
      const phone = el('phone').value.trim();
      return !!(name && phone);
    }

    let submitting = false;

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      [okFR, okEN, errFR, errEN].forEach(n=> n.style.display='none');

      if (!valid()){
        (currentLang==='fr' ? errFR : errEN).style.display='inline';
        showToast(currentLang==='fr' ? '‚úñ Remplissez les champs obligatoires' : '‚úñ Fill the required fields');
        return;
      }

      if (submitting) return;
      submitting = true;
      const oldText = el('submitBtn').textContent;
      el('submitBtn').textContent = (currentLang==='fr' ? 'Envoi‚Ä¶' : 'Sending‚Ä¶');

      try {
        const fd = new FormData(form);
        fd.append("access_key", WEB3FORMS_ACCESS_KEY);
        fd.append("from_name", "Express Garage Doors Website");
        fd.append("subject", LANG[currentLang].subject);
        fd.append("language", currentLang);
        const clientEmail = el('email').value.trim();
        if (clientEmail) fd.append("replyto", clientEmail);

        const resp = await fetch("https://api.web3forms.com/submit", { method:"POST", body: fd });
        const json = await resp.json();
        if (json.success){
          (currentLang==='fr'?okFR:okEN).style.display='inline';
          showToast(LANG[currentLang].toast_ok);
          form.reset();
        } else {
          throw new Error('web3forms failed');
        }
      } catch (err){
        const data = {}
        new FormData(form).forEach((v,k)=>{
          if (data[k]){
            if (!Array.isArray(data[k])) data[k]=[data[k]];
            data[k].push(v);
          } else data[k]=v;
        });
        if (Array.isArray(data.service)) data.service = data.service.join(', ');
        const lines = [];
        for (const k in data) lines.push(`${k}: ${data[k]}`);
        const mailto = `mailto:${encodeURIComponent(MAILTO_EMAIL)}?subject=${encodeURIComponent(LANG[currentLang].subject)}&body=${encodeURIComponent(lines.join('\n'))}`;
        window.location.href = mailto;
        (currentLang==='fr'?okFR:okEN).style.display='inline';
        showToast(LANG[currentLang].toast_ok);
      } finally {
        submitting = false;
        el('submitBtn').textContent = oldText;
      }
    });
  </script>
</body>
</html>
